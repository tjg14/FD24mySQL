{% extends "layout.html" %}

{% block title %}
    Event Structure
{% endblock %}

{% block main %}

<p></p>
    <div>
        <form action="/event_structure" method="post" id="event_details_form">
            <div class="mb-3">
                <p><b>Event Name:</b> {{ event_name }}</p>
            
            </div>
            <p></p>

            <div class="mx-auto" id="event_structure_table">
                <h2>Event Rounds & Matches</h2>
                <br>
                <table class="table table-hover table-striped" >
                    <thead>
                        <tr class="table-primary">
                            <th>Rounds & Matches</th>
                            <th>Team Scores</th>
                            <th>Edit??</th>
                        </tr>
                    </thead>
                    <tbody id="rounds_table">
                        {% for round in rounds %}
                            <tr>
                                <td colspan="2">RD{{ round.round_number }} {{ round.round_name}}</td>
                                <td>
                                    <span>
                                        Edit
                                    </span>
                                    <span>
                                        Delete
                                    </span>
                                </td>
                            </tr>
                            {%  for i in range(num_teams) %}
                                <tr>
                                    <td colspan="2">Match {{ loop.index }}</td>
                                    <td>scorecard</td>
                                </tr>
                                <tr>
                                    <td>
                                        team a
                                    </td>
                                    <td>
                                        team a score
                                    </td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>
                                        team b
                                    </td>
                                    <td>
                                        team b score
                                    </td>
                                    <td></td>
                                </tr>
                            {% endfor %}    
                        {% endfor %}
                    </tbody>
                </table>
                
            <div>
                <button class="btn btn-primary" id = "add_round_btn">Add New Round </button>
            </div>
            <p></p>

        </form>
    </div>
    <script>
        // When user clicks on the add round button, add a new set of rows to the table for the new round
        // which includes a row with the round number, an input cell for the round name and third cell with word edit
        // then for each team, add a row with the match number colspan 2 and a cell with the word scorecard
        // then add a row for each team a and team b that the user will select to setup using a dropdown menu

        let roundsTable = document.getElementById("rounds_table");
        let addRoundButton = document.getElementById("add_round_btn");

        addRoundButton.addEventListener("click", function() {

            // Hide the add round button
            addRoundButton.style.display = "none";


            let newRow = roundsTable.insertRow();
            let newCell = newRow.insertCell(0);
            newCell.innerHTML = "New Round";
            let newCell2 = newRow.insertCell(1);
            newCell2.colSpan = 2;
            let newInput = document.createElement("input");
            newInput.type = "text";
            newInput.name = "new_round_name";
            newInput.placeholder = "Round Name (Opt)";
            newCell2.appendChild(newInput);
            /*
            let newRow2 = roundsTable.insertRow();
            let newCell2_1 = newRow2.insertCell(0);
            newCell2_1.colSpan = 3;
            newCell2_1.innerHTML = "Match 1";
            
            for (let i = 0; i < 2; i++) {
                let newRow = roundsTable.insertRow();
                let newCell = newRow.insertCell(0);
                newCell.colSpan = 3;
                let newInput = document.createElement("input");
                newInput.type = "text";
                newInput.name = "TEAMA";
                newInput.placeholder = "TEAMA";
                newCell.appendChild(newInput);
               
                let newRow2 = roundsTable.insertRow();
                let newCell2 = newRow2.insertCell(0);
                newCell2.colSpan = 3;
                let newInput2 = document.createElement("input");
                newInput2.type = "text";
                newInput2.name = "teamb";
                newInput2.placeholder = "teamb";
                newCell3.appendChild(newInput2);
            }
            */
        });

    </script>
{% endblock %}

